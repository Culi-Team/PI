<UserControl x:Class="PIFilmAutoDetachCleanMC.MVVM.Views.ManualView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:PIFilmAutoDetachCleanMC.MVVM.Views"
             xmlns:vm="clr-namespace:PIFilmAutoDetachCleanMC.MVVM.ViewModels"
             xmlns:uc="clr-namespace:EQX.UI.Controls;assembly=EQX.UI"
             d:DataContext="{d:DesignInstance Type=vm:ManualViewModel}"
             xmlns:uiControls="clr-namespace:EQX.UI.Controls;assembly=EQX.UI"
             IsEnabled="{Binding MachineStatus.IsStandByProcessMode}"
             mc:Ignorable="d"
             x:Name="root"
             d:DesignHeight="450"
             d:DesignWidth="800">
    <UserControl.Resources>
        <Style x:Key="SpinnerDotStyle"
               TargetType="Ellipse">
            <Setter Property="Width"
                    Value="8" />
            <Setter Property="Height"
                    Value="8" />
            <Setter Property="Fill"
                    Value="DodgerBlue" />
            <Setter Property="RenderTransformOrigin"
                    Value="0.5,0.5" />
        </Style>
    </UserControl.Resources>
    <Grid>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="6*" />
                <ColumnDefinition Width="1*" />
            </Grid.ColumnDefinitions>
            <Grid>
                <DockPanel>
                    <ItemsControl ItemsSource="{Binding ManualUnits}"
                                  DockPanel.Dock="Left"
                                  Width="200">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <RadioButton Content="{Binding UnitName}"
                                             Command="{Binding DataContext.ManualUnitSelectCommand, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}}"
                                             CommandParameter="{Binding UnitName}"
                                             GroupName="MANUAL_UNIT_RADIOBUTTON"
                                             IsChecked="{Binding IsSelected, Mode=TwoWay}"
                                             Style="{StaticResource ButtonLikeRadioButtonStyle}">
                                </RadioButton>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <UniformGrid Columns="1" />
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                    </ItemsControl>
                    <ContentControl Content="{Binding CurrentManualUnitViewModel}" />
                </DockPanel>
            </Grid>
            <DockPanel Grid.Column="1">
                <GroupBox Header="SPEED CONTROL"
                          DockPanel.Dock="Top">
                    <StackPanel Orientation="Vertical">
                        <Grid>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Ellipse Width="26"
                                         Height="26"
                                         Fill="{Binding SpeedControllersIsConnected,Converter={StaticResource BooleanToOnOffBrushConverter}}"
                                         Stroke="{StaticResource PrimaryBorderBrush}"
                                         StrokeThickness="1"
                                         Margin="0 0 5 0" />
                                <uiControls:ImageButton Grid.Column="1"
                                                        Content="Speed Controllers"
                                                        Command="{Binding SpeedControllerConnectCommand}"
                                                        Height="40"
                                                        Margin="0 5 0 0" />
                            </Grid>

                        </Grid>
                    </StackPanel>
                </GroupBox>
                <GroupBox Header="TORQUE CONTROL"
                          DockPanel.Dock="Top">
                    <StackPanel Orientation="Vertical">
                        <Grid>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Ellipse Width="26"
                                         Height="26"
                                         Fill="{Binding TorqueControllersIsConnected,Converter={StaticResource BooleanToOnOffBrushConverter}}"
                                         Stroke="{StaticResource PrimaryBorderBrush}"
                                         StrokeThickness="1"
                                         Margin="0 0 5 0" />
                                <uiControls:ImageButton Grid.Column="1"
                                                        Content="Torque Controllers"
                                                        Command="{Binding TorqueControllerConnectCommand}"
                                                        Height="40"
                                                        Margin="0 5 0 0" />
                            </Grid>

                        </Grid>
                    </StackPanel>
                </GroupBox>

                <GroupBox Header="MOTION"
                          DockPanel.Dock="Top">
                    <StackPanel Orientation="Vertical">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Ellipse Width="26"
                                     Height="26"
                                     Fill="{Binding MotionsInovanceIsConnected,Converter={StaticResource BooleanToOnOffBrushConverter}}"
                                     Stroke="{StaticResource PrimaryBorderBrush}"
                                     StrokeThickness="1"
                                     Margin="0 0 5 0" />
                            <uiControls:ImageButton Grid.Column="1"
                                                    Content="Motions Inovance"
                                                    Command="{Binding MotionInovanceConnectCommand}"
                                                    Height="40"
                                                    Margin="0 5 0 0" />
                        </Grid>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Ellipse Width="26"
                                     Height="26"
                                     Fill="{Binding MotionAjinIsConnected, Converter={StaticResource BooleanToOnOffBrushConverter}}"
                                     Stroke="{StaticResource PrimaryBorderBrush}"
                                     StrokeThickness="1"
                                     Margin="0 0 5 0" />
                            <uiControls:ImageButton Grid.Column="1"
                                                    Content="Motion Ajin"
                                                    Command="{Binding MotionAjinConnectCommand}"
                                                    Height="40"
                                                    Margin="0 5 0 0" />
                        </Grid>
                    </StackPanel>
                </GroupBox>
                <GroupBox Header="ROBOT"
                          DockPanel.Dock="Top">
                    <StackPanel Orientation="Vertical">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Ellipse Width="26"
                                     Height="26"
                                     Fill="{Binding RobotLoadIsConnected,Converter={StaticResource BooleanToOnOffBrushConverter}}"
                                     Stroke="{StaticResource PrimaryBorderBrush}"
                                     StrokeThickness="1"
                                     Margin="0 0 5 0" />
                            <uiControls:ImageButton Grid.Column="1"
                                                    Content="Robot Load"
                                                    Command="{Binding RobotLoadConnectCommand}"
                                                    Height="40"
                                                    Margin="0 5 0 0" />
                        </Grid>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Ellipse Width="26"
                                     Height="26"
                                     Fill="{Binding RobotUnloadIsConnected, Converter={StaticResource BooleanToOnOffBrushConverter}}"
                                     Stroke="{StaticResource PrimaryBorderBrush}"
                                     StrokeThickness="1"
                                     Margin="0 0 5 0" />
                            <uiControls:ImageButton Grid.Column="1"
                                                    Content="Robot Unload"
                                                    Command="{Binding RobotUnloadConnectCommand}"
                                                    Height="40"
                                                    Margin="0 5 0 0" />
                        </Grid>
                    </StackPanel>
                </GroupBox>

                <GroupBox Header="SYRINGE PUMP"
                          DockPanel.Dock="Top">
                    <StackPanel Orientation="Vertical">
                        <Grid>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Ellipse Width="26"
                                         Height="26"
                                         Fill="{Binding SyringePumpIsConnected,Converter={StaticResource BooleanToOnOffBrushConverter}}"
                                         Stroke="{StaticResource PrimaryBorderBrush}"
                                         StrokeThickness="1"
                                         Margin="0 0 5 0" />
                                <uiControls:ImageButton Grid.Column="1"
                                                        Content="Syringe Pump"
                                                        Command="{Binding SyringePumpConnectCommand}"
                                                        Height="40"
                                                        Margin="0 5 0 0" />
                            </Grid>

                        </Grid>
                    </StackPanel>
                </GroupBox>

                <GroupBox Header="INDICATOR"
                          DockPanel.Dock="Top">
                    <StackPanel Orientation="Vertical">
                        <Grid>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Ellipse Width="26"
                                         Height="26"
                                         Fill="{Binding IndicatorIsConnected,Converter={StaticResource BooleanToOnOffBrushConverter}}"
                                         Stroke="{StaticResource PrimaryBorderBrush}"
                                         StrokeThickness="1"
                                         Margin="0 0 5 0" />
                                <uiControls:ImageButton Grid.Column="1"
                                                        Content="Indicator"
                                                        Command="{Binding IndicatorConnectCommand}"
                                                        Height="40"
                                                        Margin="0 5 0 0" />
                            </Grid>

                        </Grid>
                    </StackPanel>
                </GroupBox>

                <GroupBox Header="REGULATOR"
                          DockPanel.Dock="Top">
                    <StackPanel Orientation="Vertical">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Ellipse Width="26"
                                     Height="26"
                                     Fill="{Binding WETCleanLeftRegulatorIsConnected,Converter={StaticResource BooleanToOnOffBrushConverter}}"
                                     Stroke="{StaticResource PrimaryBorderBrush}"
                                     StrokeThickness="1"
                                     Margin="0 0 5 0" />
                            <uiControls:ImageButton Grid.Column="1"
                                                    Content="WET Clean Left"
                                                    Command="{Binding RegulatorConnectCommand}"
                                                    CommandParameter="WETCleanLeft"
                                                    Height="40"
                                                    Margin="0 5 0 0" />
                        </Grid>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Ellipse Width="26"
                                     Height="26"
                                     Fill="{Binding WETCleanRightRegulatorIsConnected,Converter={StaticResource BooleanToOnOffBrushConverter}}"
                                     Stroke="{StaticResource PrimaryBorderBrush}"
                                     StrokeThickness="1"
                                     Margin="0 0 5 0" />
                            <uiControls:ImageButton Grid.Column="1"
                                                    Content="WET Clean Right"
                                                    Command="{Binding RegulatorConnectCommand}"
                                                    CommandParameter="WETCleanRight"
                                                    Height="40"
                                                    Margin="0 5 0 0" />
                        </Grid>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Ellipse Width="26"
                                     Height="26"
                                     Fill="{Binding AFCleanLeftRegulatorIsConnected,Converter={StaticResource BooleanToOnOffBrushConverter}}"
                                     Stroke="{StaticResource PrimaryBorderBrush}"
                                     StrokeThickness="1"
                                     Margin="0 0 5 0" />
                            <uiControls:ImageButton Grid.Column="1"
                                                    Content="AF Clean Left"
                                                    Command="{Binding RegulatorConnectCommand}"
                                                    CommandParameter="AFCleanLeft"
                                                    Height="40"
                                                    Margin="0 5 0 0" />
                        </Grid>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Ellipse Width="26"
                                     Height="26"
                                     Fill="{Binding AFCleanRightRegulatorIsConnected,Converter={StaticResource BooleanToOnOffBrushConverter}}"
                                     Stroke="{StaticResource PrimaryBorderBrush}"
                                     StrokeThickness="1"
                                     Margin="0 0 5 0" />
                            <uiControls:ImageButton Grid.Column="1"
                                                    Content="AF Clean Right"
                                                    Command="{Binding RegulatorConnectCommand}"
                                                    CommandParameter="AFCleanRight"
                                                    Height="40"
                                                    Margin="0 5 0 0" />
                        </Grid>
                    </StackPanel>
                </GroupBox>
            </DockPanel>
        </Grid>
        <Grid Background="#50000000"
              Visibility="{Binding IsConnecting, Converter={StaticResource BooleanToVisibilityConverter}}">

            <!-- Spinner -->
            <Grid HorizontalAlignment="Center"
                  VerticalAlignment="Center">
                <Canvas Width="80" Height="80">
            <!-- 8 chấm đều nhau quanh vòng tròn -->
            <Ellipse x:Name="Dot1" Width="10" Height="10" Fill="DodgerBlue" Canvas.Left="35" Canvas.Top="0"/>
            <Ellipse x:Name="Dot2" Width="10" Height="10" Fill="DodgerBlue" Canvas.Left="56" Canvas.Top="9"/>
            <Ellipse x:Name="Dot3" Width="10" Height="10" Fill="DodgerBlue" Canvas.Left="65" Canvas.Top="30"/>
            <Ellipse x:Name="Dot4" Width="10" Height="10" Fill="DodgerBlue" Canvas.Left="56" Canvas.Top="51"/>
            <Ellipse x:Name="Dot5" Width="10" Height="10" Fill="DodgerBlue" Canvas.Left="35" Canvas.Top="60"/>
            <Ellipse x:Name="Dot6" Width="10" Height="10" Fill="DodgerBlue" Canvas.Left="14" Canvas.Top="51"/>
            <Ellipse x:Name="Dot7" Width="10" Height="10" Fill="DodgerBlue" Canvas.Left="5" Canvas.Top="30"/>
            <Ellipse x:Name="Dot8" Width="10" Height="10" Fill="DodgerBlue" Canvas.Left="14" Canvas.Top="9"/>
        </Canvas>

        <Grid.Triggers>
            <EventTrigger RoutedEvent="Grid.Loaded">
                <BeginStoryboard>
                    <Storyboard RepeatBehavior="Forever">
                        <!-- 8 animation mờ / sáng luân phiên -->
                        <DoubleAnimation Storyboard.TargetName="Dot1" Storyboard.TargetProperty="Opacity"
                                         From="0.2" To="1" Duration="0:0:0.8" BeginTime="0:0:0" AutoReverse="True"/>
                        <DoubleAnimation Storyboard.TargetName="Dot2" Storyboard.TargetProperty="Opacity"
                                         From="0.2" To="1" Duration="0:0:0.8" BeginTime="0:0:0.1" AutoReverse="True"/>
                        <DoubleAnimation Storyboard.TargetName="Dot3" Storyboard.TargetProperty="Opacity"
                                         From="0.2" To="1" Duration="0:0:0.8" BeginTime="0:0:0.2" AutoReverse="True"/>
                        <DoubleAnimation Storyboard.TargetName="Dot4" Storyboard.TargetProperty="Opacity"
                                         From="0.2" To="1" Duration="0:0:0.8" BeginTime="0:0:0.3" AutoReverse="True"/>
                        <DoubleAnimation Storyboard.TargetName="Dot5" Storyboard.TargetProperty="Opacity"
                                         From="0.2" To="1" Duration="0:0:0.8" BeginTime="0:0:0.4" AutoReverse="True"/>
                        <DoubleAnimation Storyboard.TargetName="Dot6" Storyboard.TargetProperty="Opacity"
                                         From="0.2" To="1" Duration="0:0:0.8" BeginTime="0:0:0.5" AutoReverse="True"/>
                        <DoubleAnimation Storyboard.TargetName="Dot7" Storyboard.TargetProperty="Opacity"
                                         From="0.2" To="1" Duration="0:0:0.8" BeginTime="0:0:0.6" AutoReverse="True"/>
                        <DoubleAnimation Storyboard.TargetName="Dot8" Storyboard.TargetProperty="Opacity"
                                         From="0.2" To="1" Duration="0:0:0.8" BeginTime="0:0:0.7" AutoReverse="True"/>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger>
        </Grid.Triggers>
            </Grid>

            <TextBlock Text="Connecting..."
                       Foreground="White"
                       FontSize="20"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Bottom"
                       Margin="0,0,0,60" />
        </Grid>
    </Grid>
</UserControl>
